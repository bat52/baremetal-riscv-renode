:name: Y2k VexRiscv
:description: This script runs baremetal on VexRiscv CPU

$name?="Y2kbugger"

using sysbus
mach create $name
machine LoadPlatformDescription @y2kvexriscv.repl
sysbus.cpu SetMachineIrqMask 0xFFFFFFFF

sysbus LoadELF @image

start
# watch "sysbus.cpu GetRegistersValues" 1000
#watch "sysbus FindSymbolAt `sysbus.cpu PC`" 10
machine StartGdbServer 3333
emulation CreateServerSocketTerminal 1234 "externalUART"
connector Connect uart externalUART
